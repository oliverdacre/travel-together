{% extends "base.html" %}

{% block content %}
<div class="card">
  <h1>ğŸ‘¤ {{ user.name }}'s Profile</h1>
</div>

<div class="card">
  <h2>ğŸ“ About</h2>
  {% if user.description %}
    <p>{{ user.description }}</p>
  {% else %}
    <p class="text-muted"><em>No description provided.</em></p>
  {% endif %}
</div>

<div class="card">
  <h2>â„¹ï¸ User Information</h2>
  <p><strong>ğŸ“§ Email:</strong> {{ user.email }}</p>
  {% if user.age %}
    <p><strong>ğŸ‚ Age:</strong> {{ user.age }}</p>
  {% endif %}
  {% if user.gender %}
    <p><strong>âš§ï¸ Gender:</strong> {{ user.gender }}</p>
  {% endif %}
</div>

<div class="card">
  <h2>ğŸŒŸ Ratings</h2>
  {% if user.received_ratings %}
    <p><strong>Average Rating:</strong> {{ "%.2f"|format(user.average_rating) }} / 5 (based on {{ user.received_ratings|length }} ratings)</p>
    <ul>
      {% for rating in user.received_ratings %}
        <li>
          {{ "â­" * rating.rating }} from <a href="{{ url_for('profile.profile', user_id=rating.rater.id) }}">{{ rating.rater.name }}</a> for trip <em>{{ rating.trip.title }}</em>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p class="text-muted"><em>No ratings received yet.</em></p>
  {% endif %}
</div>

{% if current_user.id == user.id %}
  <div class="card">
    <a href="{{ url_for('profile.edit_profile') }}" class="btn btn-secondary">âœï¸ Edit your profile</a>
  </div>
{% endif %}

<p class="mt-md">
  <a href="{{ url_for('main.index') }}" class="btn btn-link">â† ğŸ  Back to home</a>
</p>
{% endblock %}

