{% extends "base.html" %}

{% block content %}
<div class="card">
  <div style="display: flex; align-items: center; gap: 20px;">
    {% if user.profile_photo %}
      <img src="{{ url_for('main.uploaded_file', filename=user.profile_photo) }}" alt="Profile photo" style="width: 120px; height: 120px; border-radius: 50%; object-fit: cover; border: 3px solid #ddd;">
    {% else %}
      <div style="width: 120px; height: 120px; border-radius: 50%; background-color: #ddd; display: flex; align-items: center; justify-content: center; font-size: 48px; border: 3px solid #ccc;">
        ğŸ‘¤
      </div>
    {% endif %}
    <div>
      <h1 style="margin: 0;">{{ user.name }}</h1>
      {% if user.location %}
        <p style="margin: 5px 0; color: #666;">ğŸ“ {{ user.location }}</p>
      {% endif %}
    </div>
  </div>
</div>

<div class="card">
  <h2>ğŸ“ About</h2>
  {% if user.description %}
    <p>{{ user.description }}</p>
  {% else %}
    <p class="text-muted"><em>No description provided.</em></p>
  {% endif %}
</div>

<div class="card">
  <h2>â„¹ï¸ User Information</h2>
  <p><strong>ğŸ“§ Email:</strong> {{ user.email }}</p>
  {% if user.birthday %}
    <p><strong>ğŸ‚ Birthday:</strong> {{ user.birthday.strftime('%B %d, %Y') }}</p>
  {% endif %}
  {% if user.calculated_age %}
    <p><strong>ğŸ‚ Age:</strong> {{ user.calculated_age }} years old</p>
  {% elif user.age %}
    <p><strong>ğŸ‚ Age:</strong> {{ user.age }} years old</p>
  {% endif %}
  {% if user.gender %}
    <p><strong>âš§ï¸ Gender:</strong> {{ user.gender }}</p>
  {% endif %}
  {% if user.location %}
    <p><strong>ğŸ“ Location:</strong> {{ user.location }}</p>
  {% endif %}
  {% if user.phone %}
    <p><strong>ğŸ“ Phone:</strong> {{ user.phone }}</p>
  {% endif %}
</div>

<div class="card">
  <h2>ğŸŒŸ Ratings</h2>
  {% if user.received_ratings %}
    <p><strong>Average Rating:</strong> {{ "%.2f"|format(user.average_rating) }} / 5 (based on {{ user.received_ratings|length }} ratings)</p>
    <ul>
      {% for rating in user.received_ratings %}
        <li>
          {{ "â­" * rating.rating }} from <a href="{{ url_for('profile.profile', user_id=rating.rater.id) }}">{{ rating.rater.name }}</a> for trip <em>{{ rating.trip.title }}</em>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p class="text-muted"><em>No ratings received yet.</em></p>
  {% endif %}
</div>

{% if current_user.id == user.id %}
  <div class="card">
    <a href="{{ url_for('profile.edit_profile') }}" class="btn btn-secondary">âœï¸ Edit your profile</a>
  </div>
{% endif %}

<p class="mt-md">
  <a href="{{ url_for('main.index') }}" class="btn btn-link">â† ğŸ  Back to home</a>
</p>
{% endblock %}

